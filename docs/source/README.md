# Prerequisite for jupter notebook

The Kernel is usually setup automatically when we install and run jupyter but if in case it is not see steps below.

```shell
jupyter kernelspec list #check available kernel

ipython kernel install --name "python3" --user #install a kernel

#change the display name to "Python 3 (ipykernel)" in kernel.json as this the default name generated by jupyter. 
# This is to keep the metadata of notebook in sync, and avoid unnecessary diff. 
```

# Setting up the docs environment

## Install dependencies for building documentation

```shell
pip install -r docs/source/requirements_docs.txt
```

## How to pass environment variables

`.env` file #TODO this is being discussed and is not final.

So users have to create/edit the .env file which is ideally placed in project root directory. See usage of
dot-env [here](https://github.com/theskumar/python-dotenv).

```shell
dotenv set RADICAL_PILOT_DBURL mongodb://localhost:27017/rpdb
# This will create a file in {PROJECT_ROOT} and add a variable RADICAL_PILOT_DBURL
# Replace the mongo URL as necessary. Format -  mongodb://<user_id>:<password>@<ip_address>:<port>/<db_name> 
```

## Building the documentation

###  

```shell
jupyter nbconvert --to html notebook.ipynb
jupyter nbconvert --to notebook --execute notebook.ipynb #--inplace
jupyter nbconvert --to rst notebook.ipynb
```

### Generate documentation of notebooks with sphinx

```shell
sphinx-build -b html -d build/doctrees docs/source/ build/html # generates the documentation in build/html dir
```

### Sphinx autobuild for continuos build

```shell
sphinx_autobuild
```

## Running Jupyter Notebook for development
The jupyter notebook should be run from your {PROJECT_HOME}
```shell
jupyter notebook
```

# Details on readthedocs for documentation build with notebooks
- The build can be configured at [Readthedocs](https://readthedocs.org/dashboard/)
- The Admin section contains all the settings for the building e.g. env variables
- The Builds tab shows all the past/currently building builds.
- The important files to learn about are - 
  - index.rst - This will be the homepage of the webpage. toctree is contained here. 
  - conf.py - Configuration file that `sphinx` reads  
  - requirements_docs.txt - Dependencies for building the documentation on readthedocs
  - [.readthedocs](https://docs.readthedocs.io/en/stable/config-file/v2.html) Configuration file for readthedocs environment
- Settings for readthedocs build - 
  - Name and Repository URL, Description and Project Homepage
  - Branch - This is the branch on which the notebooks are present
  - Requirements File - Relative Path to requirements which shall be used to build
  - Documentation Type - Select `Sphinx Html`
  - Environment Variable - `RADICAL_PILOT_DBURL` value should in rtd and not committed in any file as it's sensitive.